<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>結帳</title>

<style>
body {
	font-family: "Microsoft JhengHei";
	background: #000;
	color: white;
	margin: 0;
	padding: 40px;
}

h2 {
	text-align: center;
	font-size: 42px;
	margin-bottom: 25px;
}

table {
	width: 90%;
	margin: auto;
	border-collapse: collapse;
	background: #111;
	border-radius: 12px;
	overflow: hidden;
	box-shadow: 0 0 12px #555;
}

th, td {
	border-bottom: 1px solid #333;
	padding: 18px;
	text-align: center;
	font-size: 20px;
}

th {
	background: #222;
}

.btn, button {
	display: inline-flex;
	justify-content: center;
	align-items: center;
	width: 220px;
	height: 50px;
	font-size: 20px;
	border-radius: 8px;
	border: 2px solid white;
	background: transparent;
	color: white;
	cursor: pointer;
	text-decoration: none;
	transition: 0.25s;
}

.btn:hover, button:hover {
	background: white;
	color: black;
}

input {
	width: 260px;
	padding: 10px;
	font-size: 18px;
	border-radius: 8px;
	border: 2px solid white;
	background: transparent;
	color: white;
	margin-bottom: 12px;
}

.total-box {
	text-align: center;
	font-size: 28px;
	margin-top: 25px;
}

.action-area {
	text-align: center;
	margin-top: 40px;
}
</style>

</head>
<body>

	<h2>結帳資訊</h2>

	<table>
		<thead>
			<tr>
				<th>商品</th>
				<th>單價</th>
				<th>數量</th>
				<th>小計</th>
			</tr>
		</thead>

		<tbody>
			<!-- ✅ 改成動態資料 -->
			<tr th:each="item : ${cart.items}">
				<td th:text="${item.product.name}"></td>
				<td th:text="${item.priceSnapshot}"></td>
				<td th:text="${item.quantity}"></td>
				<td th:text="${item.subtotal}"></td>
			</tr>
		</tbody>
	</table>

	<div class="total-box">
		總金額：<span th:text="${cart.total}"></span> 元
	</div>

	<hr style="margin-top: 40px; margin-bottom: 30px; border-color: #444;">

	<h3 style="text-align: center;">收件資訊</h3>

	<!-- ✅ 修正路徑 -->
	<form th:action="@{/orders/submit}" method="post"
		style="text-align: center; margin-top: 20px;">

		<input type="text" name="receiverName" placeholder="收件人姓名" required><br>
		<input type="text" name="receiverPhone" placeholder="收件人電話" required><br>
		<input type="text" name="receiverAddress" placeholder="收件地址" required><br>

		<button type="submit">確認送出訂單</button>
	</form>

	<div class="action-area">
		<a th:href="@{/cart}" class="btn">← 返回購物車</a>
	</div>

</body>
</html>
