<!DOCTYPE html>
<html lang="zh-TW" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>訂單列表</title>

<style>
body {
	font-family: "Microsoft JhengHei";
	background-color: #f5f5f5;
	padding: 20px;
}

h2 {
	text-align: center;
	color: #333;
}

table {
	width: 80%;
	margin: 20px auto;
	border-collapse: collapse;
	background-color: white;
	box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

th, td {
	border: 1px solid #ccc;
	padding: 10px;
	text-align: center;
}

th {
	background-color: #009688;
	color: white;
}

/* ✅ 黑底白字一致按鈕 */
.btn {
	padding: 6px 12px;
	background: black;
	color: white;
	border-radius: 6px;
	text-decoration: none;
	font-size: 14px;
	border: none;
	cursor: pointer;
}

.btn:hover {
	background: #333;
}

select {
	padding: 6px;
	border-radius: 4px;
}
</style>

</head>
<body>

	<h2>訂單列表</h2>

	<div th:if="${#lists.isEmpty(orders)}" class="empty-msg">尚無訂單紀錄</div>

	<table th:if="${!#lists.isEmpty(orders)}">
		<thead>
			<tr>
				<th>ID</th>
				<th>下單時間</th>
				<th>總金額</th>
				<th>狀態</th>
				<th>操作</th>
			</tr>
		</thead>

		<tbody>
			<tr th:each="order : ${orders}">
				<td th:text="${order.id}"></td>
				<td th:text="${#dates.format(order.orderDate, 'yyyy-MM-dd HH:mm')}"></td>
				<td th:text="${order.total} + ' 元'"></td>

				<td>
					<form th:action="@{'/orders/' + ${order.id} + '/update-status'}"
						method="post">
						<select name="status">
							<option value="待付款" th:selected="${order.status=='待付款'}">待付款</option>
							<option value="已付款" th:selected="${order.status=='已付款'}">已付款</option>
							<option value="已出貨" th:selected="${order.status=='已出貨'}">已出貨</option>
							<option value="已完成" th:selected="${order.status=='已完成'}">已完成</option>
						</select>
						<button type="submit" class="btn">更新</button>
					</form>
				</td>

				<td><a class="btn" th:href="@{'/orders/' + ${order.id}}">查看</a>
				</td>

			</tr>
		</tbody>
	</table>

	<div style="text-align: center;">
		<a class="btn" th:href="@{/products}">← 回商品頁</a>
	</div>

</body>
</html>
