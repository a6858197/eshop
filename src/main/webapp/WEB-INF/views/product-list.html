<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>å•†å“åˆ—è¡¨</title>

<style>
body {
	font-family: "Microsoft JhengHei";
	background: #000;
	color: white;
	margin: 0;
	padding: 0;
}

/* âœ… çµ±ä¸€æ‰€æœ‰æŒ‰éˆ• */
.btn, button {
	display: inline-flex;
	justify-content: center;
	align-items: center;
	width: 180px;
	height: 48px;
	font-size: 20px;
	border-radius: 8px;
	border: 2px solid white;
	background: transparent;
	color: white;
	cursor: pointer;
	text-decoration: none;
	transition: 0.25s;
}

.btn:hover, button:hover {
	background: white;
	color: black;
}

/* âœ… é ‚éƒ¨å·¥å…·åˆ— */
.top-bar {
	display: flex;
	justify-content: flex-end;
	align-items: center;
	margin: 20px;
	font-size: 20px;
}

.top-bar>* {
	margin-left: 20px;
}

/* âœ… è¨Šæ¯æç¤º */
.message {
	text-align: center;
	font-size: 22px;
	margin-top: 10px;
	color: #00ffea;
}

/* âœ… æœå°‹å€ */
.search-box {
	display: flex;
	justify-content: center;
	align-items: center;
	gap: 20px;
	margin-top: 30px;
	margin-bottom: 30px;
}

.search-box input, .search-box select {
	padding: 14px;
	font-size: 20px;
	border-radius: 8px;
	border: 2px solid white;
	background: transparent;
	color: white;
}

.search-box input::placeholder {
	color: #bbb;
}

.search-box select option {
	color: black;
}

/* âœ… å•†å“å€ï¼š3 å€‹ä¸€åˆ— */
.product-grid {
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	gap: 35px;
	width: 90%;
	margin: auto;
	margin-top: 30px;
}

/* âœ… å•†å“å¡ç‰‡ */
.product-card {
	text-align: center;
	padding: 15px;
	background: #111;
	border-radius: 12px;
	border: 1px solid white;
	box-shadow: 0 0 12px #777;
}

/* âœ… å•†å“åœ–ç‰‡ */
.product-card img {
	width: 260px;
	height: 260px;
	object-fit: contain;
	cursor: pointer;
	transition: 0.3s;
	filter: drop-shadow(0px 0px 6px #999);
}

.product-card img:hover {
	transform: scale(1.07);
}

/* âœ… æŒ‰éˆ•å€ */
.action-box {
	margin-top: 18px;
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: 10px;
}

.action-box input {
	width: 180px;
	height: 48px;
	font-size: 18px;
	text-align: center;
	border-radius: 8px;
	border: 2px solid white;
	background: transparent;
	color: white;
}
</style>

</head>
<body>

	<!-- âœ… é ‚éƒ¨å·¥å…·åˆ— -->
	<div class="top-bar">
		<span th:if="${loggedInUser != null}"> ğŸ‘‹ æ­¡è¿ï¼Œ<strong
			th:text="${loggedInUser.name}"></strong>
		</span> <a th:href="@{/cart}" class="btn">ğŸ›’ æª¢è¦–è¨‚å–®</a> <span
			th:if="${loggedInUser == null}"> <a th:href="@{/login}"
			class="btn">ç™»å…¥</a>
		</span> <span th:if="${loggedInUser != null}"> <a th:href="@{/logout}"
			class="btn">ç™»å‡º</a>
		</span>
	</div>

	<!-- âœ… åŠ å…¥è³¼ç‰©è»Šçš„æˆåŠŸè¨Šæ¯ -->
	<div th:if="${message}" class="message" th:text="${message}"></div>

	<h1 style="text-align: center; font-size: 40px; margin-top: 10px;">å•†å“åˆ—è¡¨</h1>

	<!-- âœ… æœå°‹ -->
	<form th:action="@{/products}" method="get" class="search-box">
		<input type="text" name="keyword" placeholder="è¼¸å…¥é—œéµå­—æœå°‹"
			th:value="${param.keyword}" style="width: 330px;"> <select
			name="category">
			<option value="">--å…¨éƒ¨åˆ†é¡--</option>
			<option value="Audio" th:selected="${param.category == 'Audio'}">éŸ³éŸ¿</option>
			<option value="Phone" th:selected="${param.category == 'Phone'}">è€³æ©Ÿ</option>
			<option value="Laptop" th:selected="${param.category == 'Laptop'}">æ‰‹éŒ¶</option>
		</select> <select name="sort">
			<option value="newest" th:selected="${param.sort == 'newest'}">æœ€æ–°ä¸Šæ¶</option>
			<option value="priceAsc" th:selected="${param.sort == 'priceAsc'}">åƒ¹æ ¼ï¼šä½
				â†’ é«˜</option>
			<option value="priceDesc" th:selected="${param.sort == 'priceDesc'}">åƒ¹æ ¼ï¼šé«˜
				â†’ ä½</option>
		</select>
		<button type="submit" class="btn">æœå°‹</button>
	</form>

	<!-- âœ… å•†å“å±•ç¤º -->
	<div class="product-grid">
		<div class="product-card" th:each="p : ${products}">
			<a th:href="@{'/products/' + ${p.id}}"> <img
				th:src="@{${p.image}}" alt="å•†å“åœ–ç‰‡">
			</a>
			<div class="action-box">
				<a th:href="@{'/products/' + ${p.id}}" class="btn">æŸ¥çœ‹</a>
				<form th:action="@{'/cart/add/' + ${p.id}}" method="post">
					<input type="number" name="quantity" value="1" min="1">
					<button type="submit" class="btn">åŠ å…¥è³¼ç‰©è»Š</button>
				</form>
			</div>
		</div>
	</div>

</body>
</html>
